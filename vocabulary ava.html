<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esperanza Rising Vocabulary Flashcards</title>
    <style>
        /* --- CSS Styles --- */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
            padding: 20px;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 90%;
            max-width: 700px;
        }

        h1 {
            color: #333;
        }

        /* --- Card Styling --- */
        .flashcard-container {
            perspective: 1000px;
            width: 100%;
            max-width: 400px;
            height: 250px;
            margin-bottom: 20px;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
            background-color: white;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            font-size: 1.5em;
            color: #333;
        }

        .back {
            transform: rotateY(180deg);
            background-color: #e6e6e6;
            font-size: 1.1em;
            line-height: 1.4;
            display: block; /* To allow for block-level content organization */
            padding-top: 50px; /* Adjust for better centered look of text */
        }

        .part-of-speech {
            font-size: 0.7em;
            color: #555;
            margin-top: 10px;
            display: block;
        }

        .definition {
            font-size: 0.9em;
            font-style: italic;
            margin-top: 5px;
            color: #444;
        }

        /* --- Rating & Controls Styling --- */
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .rating {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .rating-button {
            padding: 5px 10px;
            border: 1px solid #ccc;
            background-color: #fff;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.2s, transform 0.1s;
        }

        .rating-button:hover {
            background-color: #ddd;
        }

        .rating-button.selected {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .nav-buttons button {
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #28a745;
            color: white;
            font-size: 1em;
            transition: background-color 0.3s;
        }

        .nav-buttons button:hover {
            background-color: #218838;
        }

        .navigation-controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .navigation-controls button {
            padding: 10px 15px;
            border: 1px solid #007bff;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.2s;
        }

        .navigation-controls button:hover {
            background-color: #0056b3;
        }

        #message {
            margin-top: 20px;
            font-size: 1.2em;
            color: green;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Vocabulary Flip Cards</h1>
        <div id="flashcard-area">
            </div>

        <div id="controls" class="controls" style="display: none;">
            <div class="nav-buttons">
                <button onclick="flipCardSequential(-1)">Flip Backwards</button>
                <button onclick="flipCardSequential(1)">Flip Forwards</button>
            </div>
            <div class="rating-box">
                <p>How well do you know this word? (5 = Mastered)</p>
                <div class="rating" id="current-rating">
                    <button class="rating-button" data-rating="1" onclick="rateCard(1)">1</button>
                    <button class="rating-button" data-rating="2" onclick="rateCard(2)">2</button>
                    <button class="rating-button" data-rating="3" onclick="rateCard(3)">3</button>
                    <button class="rating-button" data-rating="4" onclick="rateCard(4)">4</button>
                    <button class="rating-button" data-rating="5" onclick="rateCard(5)">5</button>
                </div>
            </div>
        </div>

        <div id="message"></div>
    </div>

    <script>
        // --- JavaScript Logic ---
        const vocabulary = [
            // Esperanza Rising Vocabulary Part III
            { word: "spasm", partOfSpeech: "Noun/Verb", definition: "Abnormal or involuntary muscle contractions.", rating: 0 },
            { word: "eerie", partOfSpeech: "Adjective", definition: "Weird or uncanny.", rating: 0 },
            { word: "musty", partOfSpeech: "Adjective", definition: "Tasting or smelling of dampness or decay.", rating: 0 },
            { word: "supple", partOfSpeech: "Adjective", definition: "Capable of bending without breaking.", rating: 0 },
            // Cavernous & Encusted page
            { word: "huddled", partOfSpeech: "Adjective/Verb", definition: "Closely packed together.", rating: 0 },
            { word: "extravagant", partOfSpeech: "Adjective", definition: "Excessive, unrudly, lavish.", rating: 0 },
            { word: "encrusted", partOfSpeech: "Adjective/Verb", definition: "Covered as with a crust.", rating: 0 },
            { word: "cavernous", partOfSpeech: "Adjective", definition: "A large or unknown size.", rating: 0 },
            // Grotto & Anxiety page
            { word: "grotto", partOfSpeech: "Noun", definition: "A cave.", rating: 0 },
            { word: "anxiety", partOfSpeech: "Noun", definition: "Emotional or mental unease.", rating: 0 }
        ];

        let currentCardIndex = 0;
        const flashcardArea = document.getElementById('flashcard-area');
        const controlsDiv = document.getElementById('controls');
        const messageDiv = document.getElementById('message');

        function renderCard() {
            // Filter out cards with a 5 rating to determine the active set
            const activeCards = vocabulary.filter(card => card.rating < 5);

            if (activeCards.length === 0) {
                // All cards are mastered (rating 5)
                flashcardArea.innerHTML = '';
                controlsDiv.style.display = 'none';
                messageDiv.textContent = "Congratulations! You've mastered all the vocabulary words!";
                return;
            }

            // Map the current index to an index in the activeCards array
            // This ensures we only loop through cards < 5
            if (currentCardIndex >= activeCards.length) {
                currentCardIndex = 0; // Loop back to the start if we go past the end
            } else if (currentCardIndex < 0) {
                currentCardIndex = activeCards.length - 1; // Loop back to the end if we go before the start
            }

            const currentCardData = activeCards[currentCardIndex];
            const originalIndex = vocabulary.findIndex(card => card.word === currentCardData.word);

            // HTML for the card
            flashcardArea.innerHTML = `
                <div class="flashcard-container" onclick="this.querySelector('.flashcard').classList.toggle('flipped')">
                    <div class="flashcard" id="card-${originalIndex}">
                        <div class="front">
                            ${currentCardData.word}
                            <span class="part-of-speech">(${currentCardData.partOfSpeech})</span>
                        </div>
                        <div class="back">
                            <div class="definition">${currentCardData.definition}</div>
                            <span class="part-of-speech">(${currentCardData.partOfSpeech})</span>
                        </div>
                    </div>
                </div>
            `;

            // Update rating display
            updateRatingButtons(currentCardData.rating);
            controlsDiv.style.display = 'flex';
            messageDiv.textContent = `Card ${currentCardIndex + 1} of ${activeCards.length} (Total Mastered: ${vocabulary.length - activeCards.length})`;
        }

        function updateRatingButtons(rating) {
            const buttons = document.querySelectorAll('#current-rating .rating-button');
            buttons.forEach(button => {
                button.classList.remove('selected');
                if (parseInt(button.getAttribute('data-rating')) === rating) {
                    button.classList.add('selected');
                }
            });
        }

        function rateCard(rating) {
            const activeCards = vocabulary.filter(card => card.rating < 5);
            const currentCardData = activeCards[currentCardIndex];
            const originalIndex = vocabulary.findIndex(card => card.word === currentCardData.word);
            
            vocabulary[originalIndex].rating = rating;
            
            updateRatingButtons(rating);

            // If the card is rated 5, move to the next card immediately
            if (rating === 5) {
                // Check if all remaining active cards are now rated 5
                const remainingActive = vocabulary.filter(card => card.rating < 5).length;
                if (remainingActive > 0) {
                     // Move to the next card, index will be re-validated in renderCard
                    currentCardIndex++;
                }
            }
            
            // Re-render to update the display (and potentially change the card if rated 5)
            renderCard();
        }

        function flipCardSequential(direction) {
            const activeCards = vocabulary.filter(card => card.rating < 5);
            if (activeCards.length === 0) return;

            // Get the current card element
            const currentCardElement = document.querySelector('.flashcard');
            
            // Un-flip the current card before changing index
            currentCardElement.classList.remove('flipped');
            
            // Small delay before rendering the new card for a smoother transition
            setTimeout(() => {
                currentCardIndex += direction;
                renderCard();
            }, 300); // 300ms matches the CSS transition time
        }

        // Initialize the first card
        renderCard();
    </script>
</body>
</html>
